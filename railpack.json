{
  "$schema": "https://schema.railpack.com",
  "steps": {
    "install-frontend": {
      "commands": ["npm --prefix frontend install"]
    },
    "build-frontend": {
      "inputs": [{ "step": "install-frontend" }],
      "commands": ["npm --prefix frontend run build"]
    },
    "copy-build": {
      "inputs": [{ "step": "build-frontend" }],
      "commands": ["cp -r frontend/dist/* backend/static/"]
    }
  },
  "deploy": {
    "startCommand": "cd backend && uvicorn app.main:app --host 0.0.0.0 --port $PORT",
    "inputs": [
      { "step": "copy-build", "include": ["backend"] }
    ]
  }
}
